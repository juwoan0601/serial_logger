# 시리얼 데이터 로거 프로그램 기능 설명서
버전: 2025.02.10

## 1. 프로그램 개요
이 프로그램은 시리얼 통신을 통해 센서 데이터를 실시간으로 수집, 저장 및 시각화하는 Python 기반의 데이터 로거입니다.

## 2. 주요 기능

### 2.1 시리얼 통신
- 통신 포트: 설정 가능 (COM_PORT)
- 통신 속도: 설정 가능 (BAUDRATE, 단위: bps)
- 데이터 로깅 주기: 설정 가능 (LOG_PERIOD, 단위: ms)
- 자동 포트 검색 및 연결 상태 확인 기능
- 실시간 데이터 스트림 처리

### 2.2 데이터 처리
- 쉼표로 구분된 N 채널 데이터 동시 수집
- 데이터 타입: 설정 가능 (TYPE_VALUE, 예: int, float, str)
- 실시간 데이터 파싱 및 유효성 검사
- 스레드 안전한 데이터 버퍼링
- 타임스탬프 기반 데이터 동기화

### 2.3 데이터 저장
- CSV 파일 형식으로 저장
- 파일명 형식: "YYYYMMDD_HHMMSS.csv"
- 자동 데이터 폴더 생성
- 헤더: time_ms 와 설정된 LABEL_VALUE 이름에 따라 지정
- 실시간 데이터 기록

### 2.4 실시간 시각화
- Dash 기반의 웹 인터페이스
- N 채널 동시 그래프 표시
- 데이터 포인트 표시, 표시 데이터 포인트 수 설정 가능 (MAX_XPLOT_NUM)
- 100ms 주기로 그래프 업데이트
- 자동 브라우저 실행 (http://127.0.0.1:8050/)
- 실시간 수직 타임라인 표시

## 3. 프로그램 구조

### 3.1 주요 클래스
1. **DataBuffer**
   - 스레드 안전한 데이터 저장
   - 최신 데이터 값 관리
   - 시계열 데이터 버퍼링

2. **SerialReader**
   - 시리얼 포트 모니터링
   - 데이터 수신 및 파싱
   - 에러 처리 및 복구

3. **DataLogger**
   - 주기적 데이터 로깅
   - CSV 파일 관리
   - 콘솔 출력

### 3.2 안전 기능
- 설정 값 유효성 검사
- 시리얼 포트 연결 상태 모니터링
- 데이터 형식 검증
- 예외 처리 및 에러 복구
- 안전한 프로그램 종료

## 4. 사용 방법

### 4.1 설정 변경
프로그램 상단의 상수를 수정하여 다음 설정을 변경할 수 있습니다:
- COM_PORT: 시리얼 포트 번호
- BAUDRATE: 통신 속도
- LOG_PERIOD: 로깅 주기
- IS_PLOT: 실시간 플롯 활성화 여부
- MAX_XPLOT_NUM: 최대 표시 데이터 포인트 수
- PLOT_UPDATE_MS: 그래프 업데이트 주기

### 4.2 실행 및 종료
- 프로그램 실행: Python 스크립트 직접 실행
- 종료: Ctrl+C 키를 통한 안전한 종료
- 데이터는 python 스크립트 아래 'data' 폴더에 자동 저장

## 5. 시스템 요구사항
- Python 3.x
- 필요 라이브러리: serial, plotly, dash, flask
- 웹 브라우저 (시각화 기능 사용 시)
